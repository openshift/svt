---
- name: install packages
  yum: name={{ item }} state=latest
  with_items:
    - ansible
    - bind-utils
    - blktrace
    - ethtool
    - findutils
    - git
    - gnuplot
    - golang
    - httpd-tools
    - hwloc
    - iotop
    - kernel
    - ltrace
    - mailx
    - maven
    - netsniff-ng
    - net-tools
    - ntp
    - ntpdate
    - numactl
    - pciutils
    - perf
    - pbench-agent
    - pbench-sysstat
    - python-docker-py
    - python-pip
    - python-rbd
    - python2-boto3
    - powertop
    - psmisc
    - rpm-build
    - screen
    - sos
    - strace
    - tar
    - tcpdump
    - tmux
    - vim-enhanced
    - xauth
    - wget
    - yum-utils

- name: yum update
  yum: name=* state=latest

- name: install pbench internal
  yum: name=pbench-agent-internal state=latest
  when: internal_image | bool

- name: install persistent storage clients
  yum: name={{ item }} state=latest
  with_items:
    - ceph-common
    - glusterfs-fuse
    - iscsi-initiator-utils

- name: install bashrc file
  copy: src=bashrc dest=/root/.bashrc force=yes

- name: never expire yum metadata
  shell: echo metadata_expire=never >> /etc/yum.conf
